/*! angular-d3-charts - v0.2.4-alpha1 - 2018-10-03
* https://github.com/gkudos/angular-d3-charts
* Copyright (c) 2018 ; Licensed MIT */

!function(){"use strict";angular.module("angular-d3-charts",[]).directive("a3bar",function(r,s,o,l,d){return{restrict:"EA",replace:!0,scope:{options:"=options",data:"=data"},template:'<div class="angular-a3bar"></div>',controller:function(t){r.info("[Angular - D3] Bar scope controller",t)},link:function(t,e,a){if(jQuery){t.container=e,t.type="bar",t.classPrefix="a3bar";var i=s.isDefined,n=d.setDefaults(t.options,a.id);s.setSize(e,n,a),l.setXScale(t,n),l.setYScale(t,n),i(n.zoom)&&n.zoom&&o.addZoomBehaviour(t,l.zoomBehaviour),o.addSVG(t,e.get(0),n),e.width(n.containerWidth),e.height(n.containerHeight),l.addAxis(t,n),o.updateStyles(t,n),t.$watch("data",function(){l.updateData(t,n)})}else r.error("JQuery is not loaded")}}}),angular.module("angular-d3-charts").directive("a3oabar",function(r,s,o,l,d){return{restrict:"EA",replace:!0,scope:{options:"=options",data:"=data"},template:'<div class="angular-a3oabar"></div>',controller:function(t){r.info("[Angular - D3] One Axis Bar scope controller",t)},link:function(t,e,a){if(jQuery){t.container=e,t.type="oneAxisBar",t.classPrefix="a3oabar";var i=s.isDefined,n=d.setDefaults(t.options,a.id);s.setSize(e,n,a),n.x.orient="axisBottom",l.setXScale(t,n),l.setYScale(t,n),i(n.zoom)&&n.zoom&&o.addZoomBehaviour(t,l.zoomBehaviour),o.addSVG(t,e.get(0),n),e.width(n.containerWidth),e.height(n.containerHeight),l.addOneAxis(t,n),o.updateStyles(t,n),t.$watch("data",function(){l.updateData(t,n)})}else r.error("JQuery is not loaded")}}}),angular.module("angular-d3-charts").directive("a3pie",function(r,s,o,l,d){return{restrict:"EA",replace:!0,scope:{options:"=options",data:"=data"},template:'<div class="angular-a3pie"></div>',controller:function(t){r.info("[Angular - D3] Pie scope controller",t)},link:function(t,e,a){if(jQuery){t.container=e,t.type="pie",t.classPrefix="a3pie";var i=d.setDefaults(t.options,a.id);s.setSize(e,i,a),o.addSVG(t,e.get(0),i);var n=i.width+i.margin.left+i.margin.right;n-=i.legend.show&&"vertical"===i.legend.type?i.legend.size:0,t.svg.attr("transform","translate("+n/2+","+i.height/2+")"),l.addArc(t,i),t.$watch("data",function(){l.updateData(t,i)}),t.$on("a3pie:redraw-"+d.obtainEffectiveChartId(a.id),function(){l.createLegend(t,i,s.setColors(i.pie.colors))})}else r.error("JQuery is not loaded")}}}),angular.module("angular-d3-charts").directive("a3line",function(n,r,s,t,o){return{restrict:"EA",replace:!0,scope:{options:"=options",data:"=data"},template:'<div class="angular-a3line"></div>',controller:function(t){n.info("[Angular - D3] Line scope controller",t)},link:function(t,e,a){if(jQuery){t.container=e,t.type="line",t.classPrefix="a3line";var i=o.setDefaults(t.options,a.id);r.setSize(e,i,a),s.addSVG(t,e.get(0),i),e.width(i.containerWidth),e.height(i.containerHeight)}else n.error("JQuery is not loaded")}}}),angular.module("angular-d3-charts").factory("d3Helpers",function(n){return{isEmpty:function(t){return 0===Object.keys(t).length},isUndefinedOrEmpty:function(t){return angular.isUndefined(t)||null===t||0===Object.keys(t).length},isDefined:function(t){return angular.isDefined(t)&&null!==t},isNumber:function(t){return angular.isNumber(t)},isString:function(t){return angular.isString(t)},isArray:function(t){return angular.isArray(t)},isObject:function(t){return angular.isObject(t)},isFunction:function(t){return angular.isFunction(t)},equals:function(t,e){return angular.equals(t,e)},safeApply:function(t,e){var a=t.$root.$$phase;"$apply"===a||"$digest"===a?t.$eval(e):t.$apply(e)},getCommonDefaults:function(){return{idKey:"id",width:300,heigth:250,zoom:!0,margin:{left:10,right:10,top:10,bottom:10},legend:{show:!0,size:120,type:"vertical",gap:20},timeFormat:"%d-%m-%Y",fontFamily:"Arial",fontSize:"0.75em",tooltipSize:120,axis:{show:!0,stroke:"#000",color:"#000",label:{color:"#000",fontWeight:"bold"},fontWeight:"normal"},showDefaultData:!0,locale:null,animations:{time:750,ease:d3.easeCubic}}},setDefaults:function(t,e){this.isDefined(e)&&(t.idKey=this.isDefined(e.idKey)?e.idKey:t.idKey,t.colorKey=this.isDefined(e.colorKey)?e.colorKey:t.colorKey,t.width=this.isDefined(e.width)?e.width:t.width,t.heigth=this.isDefined(e.heigth)?e.heigth:t.heigth,t.zoom=this.isDefined(e.zoom)?e.zoom:t.zoom,t.timeFormat=this.isDefined(e.timeFormat)?e.timeFormat:t.timeFormat,t.fontFamily=this.isDefined(e.fontFamily)?e.fontFamily:t.fontFamily,t.fontSize=this.isDefined(e.fontSize)?e.fontSize:t.fontSize,t.tooltipSize=this.isDefined(e.tooltipSize)?e.tooltipSize:t.tooltipSize,t.showDefaultData=this.isDefined(e.showDefaultData)?e.showDefaultData:t.showDefaultData,t.locale=this.isDefined(e.locale)?e.locale:t.locale,this.isDefined(e.margin)&&angular.extend(t.margin,e.margin),this.isDefined(e.legend)&&angular.extend(t.legend,e.legend),this.isDefined(e.axis)&&angular.extend(t.axis,e.axis),this.isDefined(e.animations)&&angular.extend(t.animations,e.animations))},setSize:function(t,e,a){var i=this.isDefined(a.width)?a.width:e.width,n=this.isDefined(a.height)?a.height:e.height;isNaN(i)?t.css("width",i):t.css("width",i+"px"),isNaN(n)?t.css("height",n):t.css("height",n+"px"),e.width=t.width(),e.height=t.height()},setColors:function(t,e){var a=e||d3.scaleOrdinal(d3.schemePaired);return this.isDefined(t)&&(a=this.isArray(t)?d3.scaleOrdinal().range(t):a,a=this.isString(t)?d3.scaleOrdinal().range([t]):a,a=this.isFunction(t)?t:a),a},getDataFromScope:function(t,e){var a=null;return this.isUndefinedOrEmpty(t.data)&&e.showDefaultData&&!this.isUndefinedOrEmpty(e.defaultData)?a=e.defaultData:this.isString(t.data)||(a=t.data),a},getRandomString:function(t){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",a=t||8,i="",n=0;n<a;n++){var r=Math.floor(Math.random()*e.length);i+=e.substring(r,r+1)}return i},getRandomColor:function(){var t=Math.floor(256*Math.random()),e=Math.floor(256*Math.random()),a=Math.floor(256*Math.random());return d3.rgb(t,e,a)},obtainEffectiveChartId:function(t,e){var a,i;if(angular.isDefined(e))a=e;else if(1===Object.keys(t).length)for(i in t)t.hasOwnProperty(i)&&(a=i);else 0===Object.keys(t).length?a="main":n.error("[AngularJS - D3] - You have more than 1 object on the DOM, you must provide the object ID");return a}}}),angular.module("angular-d3-charts").factory("iconHelpers",function(){return{tree:"m 101.56082,48.552288 c -0.88364,1.27999 -1.603384,1.357043 -1.562119,2.826786 0.119189,0.64172 0.977609,0.392162 1.562119,0.471514 -0.0333,0.66932 -0.0665,1.33634 0.38968,1.414543 -1.161,1.423742 -2.082459,3.140743 -3.903601,3.769812 -0.119195,1.472044 1.12661,-1.198336 1.170161,0.471515 -0.406863,1.233987 -1.23778,1.959658 -1.952943,2.827935 0.978764,1.02008 3.413063,0.279458 3.515063,2.356419 -2.258944,-0.36916 -3.338565,0.684272 -5.468005,0.470364 1.844064,2.005661 -0.857278,2.099964 0,4.242478 -0.382796,0.760173 -1.041799,1.083332 -1.562127,0.471514 0.248703,1.028132 -1.10598,1.499646 0.389673,1.413393 -1.12088,0.35651 -2.484731,2.260967 -3.124251,0.471515 -0.5868,3.530605 -3.027979,4.827843 -5.856537,5.654718 1.218297,1.723902 0.324344,2.316169 0,4.713992 -1.350098,-0.372612 -1.648082,0.524416 -2.342615,0.943028 0.46646,0.680821 1.923145,0.714171 0.389672,1.413393 0.08939,0.600318 1.167869,0.616418 1.173599,0 1.132341,1.247787 -1.445223,1.99991 -2.73687,1.884906 -1.123172,-3.471954 -3.542575,0.549717 -4.684084,1.414542 -2.230298,-2.450723 -6.107531,-0.125354 -7.80948,2.355271 -0.991372,-0.247258 -2.82512,-0.661269 -1.954089,0.471514 -0.375918,1.167284 -1.500237,-0.648619 -2.732286,0 0.467605,-0.618719 0.152429,-0.741772 0,-1.413392 -2.525991,1.966558 -3.633117,2.903837 -7.030138,1.413392 -0.79195,0.957979 -1.810827,1.304139 -1.170161,2.827935 -0.61889,0.04025 -1.492214,-0.226557 -1.560979,0.471514 -1.128902,-0.211606 -0.924897,-2.028661 -1.954089,-2.356421 -0.456146,7.30157 -2.178724,20.025552 3.90474,22.623472 4.99009,2.13102 12.584104,-1.49159 16.79256,2.82679 -14.971418,0 -29.939397,0 -44.909668,0 0.116901,-0.95798 0.781635,-1.25468 1.171307,-1.88491 5.748804,-1.38693 10.138342,0.37491 13.668309,-1.41338 4.826199,-2.44612 3.203331,-16.080939 1.170162,-21.680458 -2.269265,-1.474345 -3.32711,-4.01477 -6.247356,-2.357571 0.166184,-0.984429 -0.268185,-1.247787 -0.390818,-1.884906 -4.370053,0.923479 -6.35394,-1.949309 -11.716512,-1.887207 0.161599,-1.133934 -0.71287,-1.02353 -0.390817,-2.356421 -1.542643,-0.753271 -4.592397,1.529547 -6.638174,-0.470363 2.143196,-1.411093 -1.711117,-0.30706 -0.390817,-1.887207 -1.329469,0.828024 -1.454393,-0.150654 -1.951797,-1.413392 -1.22632,0.729122 -2.177578,0.301309 -3.124251,-0.471513 0.207443,-0.379512 0.406864,-0.765924 0.390817,-1.413394 -0.710578,0.100053 -1.421155,-1.02123 -3.125395,-0.943027 -0.649835,-0.936128 0.03553,-0.599169 0,-1.884907 -2.3437613,0.103502 -0.838941,1.444442 -3.1242509,0 0.2028585,-0.695771 0.5787771,-1.186836 0.7816356,-1.886057 -0.6314974,0.809625 -1.6343292,1.171886 -3.1242505,0.943029 0.2028585,-2.196566 1.1518238,-2.086163 0,-3.770964 1.9449205,0.675071 1.2412191,0.392162 0.7804896,-1.413391 0.7014092,-0.0598 0.824041,0.577317 1.5621253,0.471513 C 7.1651335,64.353762 4.4557688,61.621281 6.6631446,59.386763 5.0425687,59.348813 4.4798368,57.975672 2.7584045,57.030343 3.1515145,56.404724 3.1274466,55.27654 3.9297119,55.144287 3.7085159,54.704974 2.8443616,54.431265 3.5388941,54.202408 c -0.2567249,-1.413392 -0.835502,0.451964 -1.5621252,0 0.221196,-1.148885 0.3346593,-2.424272 1.5621252,-2.357571 -0.4389537,-1.354739 -0.8206028,-2.780782 -1.5621252,-3.769811 0.075642,1.060331 -0.1615992,1.085631 0,2.827934 -2.04692278,0.05405 0.085957,-2.202317 -1.95179703,-2.356421 C 0.81348409,47.110145 -0.47014047,46.095816 0.41922798,44.781326 1.622626,44.429415 0.89485677,46.407474 2.371025,45.724354 2.9119811,45.193038 1.5469838,42.973472 1.5905355,41.483027 3.4598137,42.89872 3.7853042,40.623952 3.5423323,38.184728 5.4631849,37.357853 6.1806393,35.083085 8.2287082,34.413766 7.920409,33.941101 6.8637109,34.589721 6.2757651,33.471887 6.8442274,27.875819 9.3495874,25.063986 11.743777,20.745606 c 0.22578,2.141363 2.386166,0.901627 2.34376,2.356421 1.250389,-0.915427 1.747793,-1.346691 3.513922,-2.356421 -0.881345,1.820504 0.664735,1.932057 2.342615,1.887207 0.649835,0.934978 -0.03438,0.599168 0,1.884905 2.100789,-0.67852 3.111644,-0.555466 5.077193,-1.884905 -0.355287,-1.711252 -1.152969,-0.288659 -2.343759,-0.471514 0.606282,-1.182237 1.585046,-1.578998 0.782781,-3.300599 2.67842,0.02645 1.131195,-1.720452 1.560978,-2.827935 2.158095,0.0713 1.391358,1.216735 3.125398,0 -0.257872,-1.411093 -0.835502,0.450813 -1.563271,0 0.720892,-2.66463 0.605137,-3.408703 1.563271,-5.65472 2.644037,0.302458 4.757433,-1.6986009 5.466865,0.940728 0.127216,-1.7929037 2.577563,-2.5542265 3.513922,-1.8849063 0.354143,-1.1776354 3.234276,-3.6881606 3.513923,-1.8860567 0.881345,-0.3519105 0.153575,-2.6427792 0.390817,-3.7709629 0.676195,-1.2247868 3.222815,-0.1943559 3.124251,-2.3552706 1.045237,0.4657638 2.059529,0.970629 3.515068,0.9430282 -0.09053,1.8044041 0.720893,2.0643118 0.390818,3.2982988 0.312884,0.2058562 1.605677,0.6026181 2.342616,0 -1.594217,-2.4829244 1.054405,0.3082092 0,-2.8290847 1.465852,0.3576606 1.321444,-1.232837 1.951796,-1.88490656 1.426887,0.96832896 1.753523,-0.21275637 2.734579,-0.94302826 2.28531,2.86128582 3.982674,0.44851345 6.638173,1.88720652 0.216611,0.1173035 -1.014294,0.7912239 -1.170162,0.4715142 1.110565,2.2839684 5.575744,2.0562616 6.247355,5.1832053 0.954696,-1.1592346 1.693926,0.3496106 3.125396,0 0.108879,0.7613229 -0.369042,0.8119244 -0.391964,1.4133925 2.011394,-1.0246808 1.355829,1.1350845 3.515069,0.9430282 -0.168476,0.7406213 -1.228612,0.4025113 -0.781636,1.8849063 0.344974,0.371461 2.656644,-0.08166 2.733433,1.886057 1.611407,0.08395 1.160992,-1.591649 1.563271,-1.886057 0.397695,3.207446 4.105307,2.404722 5.46572,5.185506 1.05899,-0.584217 0.971887,-1.820505 2.344906,-0.943029 -2.052652,2.232218 1.596509,5.055551 2.341469,8.013441 -0.31403,-0.250708 -0.63379,-0.491065 -1.170161,-0.471515 1.951797,1.871106 -0.985641,4.271229 2.343761,4.713992 0.578777,-0.207007 -0.155869,-0.603768 0,-1.414542 1.33176,-0.351911 0.495113,1.914807 1.950651,1.414542 -1.313423,4.180375 0.330075,8.257247 1.954089,11.311738 -1.410841,-1.107482 -2.162679,-0.608368 -3.125397,0.941879 1.658397,1.336341 3.762625,1.772203 5.46572,0 -0.824042,1.883757 2.371267,-0.359961 2.735725,1.887207 0.882492,-0.263358 -0.473337,-0.736023 0.389671,-1.414542 1.133486,1.461694 1.550665,3.784763 3.124251,4.713989 -0.33007,1.381193 -1.257265,-0.280607 -1.951798,0 0.09512,0.829176 0.672758,1.074134 1.562118,0.940729 -0.755267,1.170736 0.38166,1.680201 -0.781627,2.358722 0.865307,1.754952 1.044087,-1.199487 2.341467,-0.474966 z M 6.6665829,50.908709 c -0.010314,1.245487 0.3644576,2.95444 -1.1701614,2.357572 -0.2693319,1.266188 0.8068499,0.910827 1.1701614,1.413392 0.033236,-2.672681 1.5162815,-1.179936 3.1253966,-2.829085 -1.4899214,0.604918 -1.2079825,-2.254067 -1.1713074,-0.941879 -0.331221,1.382342 -1.2584105,-0.281758 -1.9540892,0 z"}}),angular.module("angular-d3-charts").factory("barDefaults",function(r){var s=r.isDefined,o=r.obtainEffectiveChartId,l={};return{getDefaults:function(t){var e=o(l,t);return l[e]},getCreationDefaults:function(t){var e=this.getDefaults(t),a={};return angular.extend(a,e),a},setDefaults:function(t,e){var a,i=(a=r.getCommonDefaults(),angular.extend(a,{series:["A","B","C","D"],bar:{gap:.2,path:null,colors:d3.scaleOrdinal(d3.schemePaired),subcolors:null,colorInterpolator:null},x:{tickFormat:null,tickSize:6,orient:"axisBottom",position:"bottom",key:"x",label:"x",ticks:5,tickSubdivide:4},y:{scale:"linear",tickFormat:null,tickSize:6,orient:"axisLeft",position:"left",direction:"ttb",key:"y",label:"y",ticks:5,tickSubdivide:4,minFromZero:!0},axis:{guidePosition:"top",showValues:!0,valuesColor:"#000",showPercent:!0,percentColor:"#000",label:{color:"#000",fontWeight:"bold"},show:!0},defaultData:[{id:1,x:"Fruits",y:[54,0,879],tooltip:"Fruits tooltip"},{id:2,x:"Vegetables",y:[12,34,15],tooltip:"Vegetables tooltip"},{id:3,x:"Meet",y:[154,432,234],tooltip:"Meet tooltip"}]}),a);s(t)&&(r.setDefaults(i,t),s(t.bar)&&angular.extend(i.bar,t.bar),s(t.x)&&angular.extend(i.x,t.x),s(t.y)&&angular.extend(i.y,t.y),s(i.defaultData)&&angular.extend(i.defaultData,i.defaultData));var n=o(l,e);return l[n]=i}}}),angular.module("angular-d3-charts").factory("pieDefaults",function(r){var s=r.isDefined,o=r.obtainEffectiveChartId,l={};return{getDefaults:function(t){var e=o(l,t);return l[e]},getCreationDefaults:function(t){var e=this.getDefaults(t),a={};return angular.extend(a,e),a},setDefaults:function(t,e){var a,i=(a=r.getCommonDefaults(),angular.extend(a,{pie:{colors:d3.scaleOrdinal(d3.schemePaired)},radius:0,x:{key:"x",label:"x",show:!0},y:{key:"y",label:"y"},defaultData:[{id:1,x:"Fruits",y:54,tooltip:"Fruits tooltip"},{id:2,x:"Vegetables",y:23,tooltip:"Vegetables tooltip"},{id:3,x:"Meet",y:41,tooltip:"Meet tooltip"}],showPercent:!1,borderColor:"#FFF",pieAnimation:"normal"}),a);s(t)&&(r.setDefaults(i,t),i.radius=r.isDefined(t.radius)?t.radius:i.radius,i.showPercent=r.isDefined(t.showPercent)?t.showPercent:i.showPercent,i.borderColor=r.isDefined(t.borderColor)?t.borderColor:i.borderColor,i.pieAnimation=r.isDefined(t.pieAnimation)?t.pieAnimation:i.pieAnimation,s(t.pie)&&angular.extend(i.pie,t.pie),s(t.x)&&angular.extend(i.x,t.x),s(t.y)&&angular.extend(i.y,t.y),s(i.defaultData)&&angular.extend(i.defaultData,i.defaultData));var n=o(l,e);return l[n]=i},obtainEffectiveChartId:function(t){return o(l,t)}}}),angular.module("angular-d3-charts").factory("lineDefaults",function(r){var s=r.isDefined,o=r.obtainEffectiveChartId,l={};return{getDefaults:function(t){var e=o(l,t);return l[e]},getCreationDefaults:function(t){var e=this.getDefaults(t),a={};return angular.extend(a,e),a},setDefaults:function(t,e){var a,i=(a=r.getCommonDefaults(),angular.extend(a,{series:["A","B","C","D"],x:{scale:"linear",tickFormat:null,tickSize:6,orient:"bottom",position:"bottom",key:"x",label:"x",ticks:5,tickSubdivide:4},y:{scale:"linear",tickFormat:null,tickSize:6,orient:"left",position:"left",key:"y",label:"y",ticks:5,tickSubdivide:4},axis:{valuesColor:"#000",percentColor:"#000",label:{color:"#000",fontWeight:"bold"}},defaultData:[{id:1,x:"Fruits",y:[54,0,879],tooltip:"Fruits tooltip"},{id:2,x:"Vegetables",y:[12,34,15],tooltip:"Vegetables tooltip"},{id:3,x:"Meet",y:[154,432,234],tooltip:"Meet tooltip"}]}),a);s(t)&&(r.setDefaults(i,t),s(t.x)&&angular.extend(i.x,t.x),s(t.y)&&angular.extend(i.y,t.y),s(i.defaultData)&&angular.extend(i.defaultData,i.defaultData));var n=o(l,e);return l[n]=i}}}),angular.module("angular-d3-charts").factory("barHelpers",function(m,v,b){return{addAxis:function(t,e){b.addXAxis(t,e),b.addYAxis(t,e),b.addSubdivideTicks(t.yl,t.y,t.yAxis,e.y)},addOneAxis:function(t,e){b.addXAxis(t,e),t.ylTopOffset="top"===e.x.position?.125*e.height:.2*e.height,t.guide=t.svg.append("g").attr("class","guide");var a="bottom"===e.axis.guidePosition?1*e.height:t.ylTopOffset-.03*e.height;t.guide.append("line").attr("x1",t.xlLeftOffset).attr("x2",e.width+t.xlLeftOffset).attr("y1",a).attr("y2",a).style("stroke","#BBB").style("stroke-width",1).style("shape-rendering","crispEdges")},setXScale:function(t,e){t.x=d3.scaleBand(),t.x.range([0,e.width]),v.isDefined(t.xAxis)?t.xAxis.scale(t.x):(v.isDefined(e.x.orient)&&v.isString(e.x.orient)&&("axisBottom"===e.x.orient||"axisTop"===e.x.orient)||(m.warn('[Angular - D3] Tick orient must be a string. Setting default value "axisBottom"'),e.x.orient="axisBottom"),t.xAxis=d3[e.x.orient](t.x)),v.isDefined(e.x.tickSize)&&v.isNumber(e.x.tickSize)||(m.warn("[Angular - D3] Ticksize must be a number. Setting default value 6"),e.x.tickSize=6),t.xAxis.tickSize(e.x.tickSize);var a=v.getDataFromScope(t,e);t.x.domain(a.map(function(t){return t[e.x.key]})).rangeRound([0,e.width]).paddingInner(e.bar.gap),t.xAxis.tickFormat(e.x.tickFormat),v.isDefined(t.data)&&this.updateData(t.data,e)},setYScale:function(t,e){switch(e.y.scale){case"log":t.y=d3.scaleLog().clamp(!0);break;case"sqrt":t.y=d3.scaleSqrt();break;case"time":t.y=d3.scaleTime();break;default:"linear"!==e.y.scale&&(m.warn('[Angular - D3] Ticksize must be a string and ["linear", "log", "time", "sqrt"]. Setting default value "linear"'),e.y.scale="linear"),t.y=d3.scaleLinear()}var a=0;switch("oneAxisBar"===t.type&&(a=.2*e.height,"bottom"===e.axis.guidePosition&&(a+=.05*e.height)),"btt"===e.y.direction?t.y.range([e.height-a,0]):t.y.range([0,e.height-a]),v.isDefined(t.yAxis)?t.yAxis.scale(t.y):(v.isDefined(e.y.orient)&&v.isString(e.y.orient)||(m.warn('[Angular - D3] Tick orient must be a string. Setting default value "left"'),e.y.orient="axisLeft"),t.yAxis=d3[e.y.orient](t.y)),v.isDefined(e.y.tickSize)&&v.isNumber(e.y.tickSize)||(m.warn("[Angular - D3] Ticksize must be a number. Setting default value 6"),e.y.tickSize=6),t.yAxis.tickSize(e.y.tickSize),e.y.scale){case"log":v.isDefined(e.y.tickFormat)||(e.y.tickFormat=function(t){return d3.round(Math.log(t)/Math.LN10,3)%1==0?t:""}),t.yAxis.ticks(e.y.ticks),t.y.domain([.1,1e3]);break;case"time":if(!v.isDefined(e.y.tickFormat)){var i=v.isDefined(e.locale)?e.locale.timeFormat:d3.timeFormat;e.y.tickFormat=i.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!==t.getDate()}],["%b %d",function(t){return 1!==t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",function(){return!0}]])}t.yAxis.ticks(e.y.ticks);break;default:t.yAxis.ticks(e.y.ticks+e.y.ticks*e.y.tickSubdivide),t.y.domain([0,100])}t.yAxis.tickFormat(e.y.tickFormat),v.isDefined(t.data)&&this.updateData(t.data,e)},zoomBehaviour:function(){},updateData:function(s,r){if(v.isDefined(s.x)&&v.isDefined(s.y)){var t=v.getDataFromScope(s,r),e=function(t){return t[r.idKey]};if(v.isUndefinedOrEmpty(t))m.warn("[Angular - D3] No data for bars");else{m.debug("[Angular - D3] Data for bars:",t);var a=d3.timeFormat(r.timeFormat),o=v.setColors(r.bar.colors),i=function(a){return a[r.y.key].map(function(t,e){return{id:e,parentId:a[r.idKey],x:a[r.x.key],y:t}})},n=t.map(function(t){return t[r.x.key]});s.x.domain(n),s.xl.call(s.xAxis),m.debug("[Angular - D3] x domain:",n);var l=[],d=d3.max(t,function(t){return d3.max(t[r.y.key],function(t,e){return"time"!==r.y.scale||t instanceof Date||(t=a.parse(t)),v.isDefined(l[e])?l[e]+=t:l.push(t),t})}),c=0;r.y.minFromZero||(c=d3.min(t,function(t){return d3.min(t[r.y.key])})),m.debug("[Angular - D3] Data max for bars:",d),void 0===c||void 0===d||0===c&&0===d?(c=0,d="time"===r.y.scale?new Date:100):c-d==0&&(c=c instanceof Date?0:c-Math.abs(c/2),d=d instanceof Date?d:d+Math.abs(d/2)),s.y.domain([c,d]),c<d&&s.y.nice(),"bar"===s.type&&(s.yl.call(s.yAxis),b.addSubdivideTicks(s.yl,s.y,s.yAxis,r.y)),v.isDefined(s.zoom)&&v.isDefined(r.zoom)&&r.zoom;var u=d3.max(t.map(function(t){return t[r.y.key].length})),f=d3.scaleBand().domain(d3.range(u)).rangeRound([0,s.x.bandwidth()]),g=s.svg.select("g."+s.classPrefix+"-bars");g.empty()&&(g=s.svg.append("g").attr("transform","translate("+s.xlLeftOffset+","+s.ylTopOffset+")").attr("class",s.classPrefix+"-bars").attr("clip-path","url(#"+s.idClip+")"));var h=function(t,e){v.isDefined(r.bar.path)?(t.transition().duration(r.animations.time).attrTween("transform",function(t,e,a){var i=Math.abs((s.y(t.y)-s.y(c))/115),n="translate("+(s.x(t.x)+f(e)-102*i/2+f.bandwidth()/2)+", 0)",r=d3.interpolateString(a,n);return function(t){return r(t)}}),(t=e?t.selectAll("path"):t.append("path").attr("d",r.bar.path).attr("class","a3bar-bar-path").attr("fill-rule","evenodd").attr("transform","scale(0)").style("opacity",0)).style("fill",function(t,e){return d3.rgb(o(e))}).style("stroke",function(t,e){return d3.rgb(o(e)).darker()}).style("stroke-width",1).transition().ease(r.animations.ease).duration(r.animations.time).attrTween("transform",function(t,e,a){t=d3.select(this.parentNode).data()[0];var i=f.bandwidth()/102,n=Math.abs((s.y(t.y)-s.y(c))/115);return d3.interpolateString(a,"scale("+i+", "+n+")")}).style("opacity",.8)):t.attr("width",f.bandwidth()).attr("title",function(t){var e=d3.format(".3");return v.isDefined(r.y.tickFormat)&&(e=r.y.tickFormat),e(t.y)}).attr("x",function(t,e){var a=s.x(t.x)+f(e);return isNaN(a)?0:a}).attr("y",function(){var t=d3.select(this).attr("height");return"btt"===r.y.direction?s.y(0)-t:0}).attr("height",function(){var t=d3.select(this).attr("height");return t||0}).style("fill",function(){var t=d3.select(this).style("fill");return"rgb(0, 0, 0)"===t?d3.rgb(255,255,255):t}).transition().ease(r.animations.ease).duration(r.animations.time).attr("height",function(t){return Math.abs(s.y(t.y)-s.y(c))}).attr("y",function(t){var e=Math.abs(s.y(t.y)-s.y(c));return"btt"===r.y.direction?s.y(0)-e:0}).styleTween("fill",function(t,e,a){var i=d3.rgb(o(e));v.isDefined(r.bar.colorInterpolator)&&v.isFunction(r.bar.colorInterpolator)&&(i=r.bar.colorInterpolator(i.brighter(),i.darker())(t.y/d));var n=v.isDefined(r.bar.subcolors)?r.bar.subcolors[t.parentId-1]:i;return d3.interpolateRgb(a,n)}),t.select("title").remove(),t.append("title").text(function(t){var e=d3.format(".3g");return v.isDefined(r.y.tickFormat)&&(e=r.y.tickFormat),e(t.y)})},p=g.selectAll("."+s.classPrefix+"-group-bar").data(t,e);p.each(function(t){var e=d3.select(this),a=e.selectAll("."+s.classPrefix+"-bar").data(function(){return i(t)},function(t){return t.id});h(a,!0),a.enter().append(v.isDefined(r.bar.path)?"g":"rect").attr("class",s.classPrefix+"-bar"),h(a,!0),a.exit().remove(),a=e.selectAll("."+s.classPrefix+"-bar"),h(a,!0)});var y=p.enter().append("g").attr("class",s.classPrefix+"-group-bar"),x=y.selectAll("."+s.classPrefix+"-bar").data(i,function(t){return t.id}).enter().append(v.isDefined(r.bar.path)?"g":"rect").attr("class",s.classPrefix+"-bar");if(h(x),p.exit().remove(),"oneAxisBar"===s.type)s.svg.select("g."+s.classPrefix+"-helptext").remove(),y=s.svg.append("g").attr("transform","translate("+s.xlLeftOffset+","+(s.ylTopOffset-("bottom"===r.x.position?.15*r.height:.85*-r.height))+")").attr("class",s.classPrefix+"-helptext").selectAll("."+s.classPrefix+"-values").data(t,e).interrupt().enter().append("g").attr("class",s.classPrefix+"-values"),r.axis.showValues&&y.selectAll("."+s.classPrefix+"-val").data(i,function(t){return t.id}).interrupt().enter().append("text").attr("x",function(t,e){return s.x(t.x)+f(e)+f.bandwidth()/2}).attr("dy",r.axis.showPercent?0:"0.5em").attr("class",s.classPrefix+"-val").style("text-anchor","middle").style("fill",r.axis.valuesColor).text(function(t){return d3.format(".3g")(t.y)}),r.axis.showPercent&&y.selectAll("."+s.classPrefix+"-percent").data(i,function(t){return t.id}).interrupt().enter().append("text").attr("x",function(t,e){return s.x(t.x)+f(e)+f.bandwidth()/2}).attr("y",.065*r.height).attr("dy",r.axis.showValues?0:"-0.5em").attr("class",s.classPrefix+"-percent").style("text-anchor","middle").style("font-size","0.85em").style("font-weight","bold").style("fill",r.axis.percentColor).text(function(t,e){return d3.format(".3p")(t.y/l[e])});b.updateStyles(s,r)}}}}}),angular.module("angular-d3-charts").factory("pieHelpers",function(x,m,v){function f(t,e,a,i){var n,r;return(n=function(t,e,a,i){for(var n=e.length;0<=--t;)for(var r=i(a[t]),s=0;s<n;++s)if(i(e[s])===r)return e[s]}(t,e,a,i))?((r=angular.copy(n)).startAngle=n.endAngle,r):(n=function(t,e,a,i){for(var n=a.length,r=e.length;++t<n;)for(var s=i(a[t]),o=0;o<r;++o)if(i(e[o])===s)return e[o]}(t,e,a,i))?((r=angular.copy(n)).endAngle=n.startAngle,r):null}var g=function(t,e,a){switch(e){case 0:t.style("stroke",null).transition("pie-animation").duration(500).ease(d3.easeBounce).style("stroke-opacity",0).style("stroke-width",0).attr("d",d3.arc().outerRadius(.9*a.radius));break;case 1:case 2:t.style("stroke",function(){return d3.color(d3.select(this).attr("fill")).darker()}).style("stroke-opacity",0).style("stroke-width",0).transition("pie-animation").style("stroke-opacity",1).style("stroke-width",1).attr("d",d3.arc().outerRadius(.95*a.radius))}},h=function(t){return t.startAngle+(t.endAngle-t.startAngle)/2};return{addArc:function(t,e){var a=e.width-e.margin.left-e.margin.right;e.legend.show&&"vertical"===e.legend.type&&(a-=e.legend.size);var i=e.height-e.margin.top-e.margin.bottom;e.radius=Math.min(a,i)/2,t.arc=d3.arc().outerRadius(.9*e.radius),t.outerArc=d3.arc().innerRadius(1*e.radius).outerRadius(1*e.radius),t.pie=d3.pie().value(function(t){return t[e.y.key]}).sort(null),t.svg.append("g").attr("class",t.classPrefix+"-slices"),t.svg.append("g").attr("class",t.classPrefix+"-labelName"),t.svg.append("g").attr("class",t.classPrefix+"-lines")},updateData:function(n,r){x.debug("Update data");var e=m.setColors(r.pie.colors),t=m.getDataFromScope(n,r);if(t=t.filter(function(t){return m.isDefined(t[r.y.key])&&!isNaN(t[r.y.key])}),m.isUndefinedOrEmpty(t))x.warn("[Angular - D3] No data for pie");else{var s=function(t){return angular.isUndefined(t)?t:angular.isUndefined(t.data)?t.data:t.data[r.idKey]},a=function(){return function(t,e,a,i){i.innerRadius=0;var n=null;switch(a.pieAnimation){case"inverse":n={startAngle:2*Math.PI,endAngle:2*Math.PI};break;case"crossfade":n={startAngle:2*Math.PI,endAngle:0};break;case"crossfade-inverse":n={startAngle:0,endAngle:2*Math.PI};break;default:m.isDefined(a.pieAnimation)&&""!==a.pieAnimation||(x.warn('[Angular - D3] The option "pieAnimation" is undefined or it has a invalid value. Setting to "normal"'),a.pieAnimation="normal"),n={startAngle:0,endAngle:0}}t._current&&(n=t._current);var r=d3.interpolate(n,i);return t._current=r(0),function(t){return e.arc(r(t))}}(this,n,r,d3.select(this).data()[0])},i=function(){var t=n.svg.select(".a3pie-lines");return t.selectAll("g").remove(),t},o=function(e){g(d3.select(this),1,r);var t=i().append("g");t.append("polyline").style("opacity",.3).style("stroke","black").style("stroke-width","2px").style("fill","none").transition().duration(1e3).attrTween("points",function(){this._current=this._current||e;var i=d3.interpolate(this._current,e);return this._current=i(0),function(t){var e=i(t),a=n.outerArc.centroid(e);return a[0]=.95*r.radius*(h(e)<Math.PI?1:-1),[n.arc.centroid(e),n.outerArc.centroid(e),a]}}),t.append("text").attr("dy",".35em").html(function(){return e.data[r.x.key]}).attr("transform",function(){this._current=this._current||e;var t=n.outerArc.centroid(this._current);return t[0]=r.radius*(h(this._current)<Math.PI?1:-1),"translate("+t+")"}).style("text-anchor",function(){return this._current=this._current||e,h(this._current)<Math.PI?"start":"end"}).each(function(){v.wrap(this,r.tooltipSize)})};n.slices=n.svg.selectAll("."+n.classPrefix+"-slices");var l=n.slices.selectAll("path"),d=l.data(),c=n.pie(t),u=l.data(c,s);u.on("mouseout",null).on("mouseover",null).transition().duration(r.animations.time).ease(r.animations.ease).on("end",function(){d3.select(this).on("mouseover",function(t){g(d3.select(this),1,r),o(t)}).on("mouseout",function(){i(),g(d3.select(this),0,r)}).on("click",o)}).attr("fill",function(t){return angular.isDefined(r.colorKey)&&angular.isDefined(t.data[r.colorKey])?t.data[r.colorKey]:e(t.data[r.x.key])}).attrTween("d",a),u.enter().append("path").each(function(t,e){var a=f(e,d,c,s);a?(this._current=a,this._previous=a):this._current=t}).attr("fill",function(t){return angular.isDefined(r.colorKey)&&angular.isDefined(t.data[r.colorKey])?t.data[r.colorKey]:e(t.data[r.x.key])}).transition("pie-enter").duration(r.animations.time).ease(r.animations.ease).on("end",function(){d3.select(this).on("mouseover",function(t){g(d3.select(this),1,r),o(t)}).on("mouseout",function(){i(),g(d3.select(this),0,r)}).on("click",o)}).attrTween("d",a),u.exit().each(function(){d3.select(this).on("mouseout",null).on("mouseover",null)}).transition().duration(r.animations.time).ease(r.animations.ease).attrTween("d",function(t,e){var a=this._previous?this._previous:f(e,c,d,s),i=d3.interpolateObject(t,a);return function(t){return n.arc(i(t))}}).remove(),this.setStyles(n,r),r.legend.show&&this.createLegend(n,r,e)}},createLegend:function(t,i,e){var a,n,r=d3.format(",.2%"),s=m.getDataFromScope(t,i),o=d3.sum(s,function(t){return t[i.y.key]});t.legend||(n="vertical"===i.legend.type?(a=i.radius+i.legend.gap,.9*-i.radius):(a=-i.containerWidth/2+i.margin.left,i.radius+i.legend.gap),t.legend=t.svg.append("g").attr("class","legend").attr("transform","translate("+a+", "+n+")"));var l=t.legend.selectAll(".legend-item").data(s,function(t){return angular.isUndefined(t)?t:t[i.idKey]});l.selectAll("text").html(function(){var t=d3.select(this.parentNode).data()[0];return t[i.x.key]+" ("+r(t[i.y.key]/o)+")"}).each(function(){"vertical"===i.legend.type&&v.wrap(this,i.legend.size-20)}),l.selectAll("rect").attr("fill",function(){var t=d3.select(this.parentNode).data()[0];return e(t[i.x.key])});var d=l.enter().append("g").attr("class","legend-item");d.append("rect").attr("width",18).attr("height",18).attr("transform","translate(0, -13)").attr("fill",function(){var t=d3.select(this.parentNode).data()[0];return e(t[i.x.key])}),d.append("text").attr("y",0).attr("dy","0").attr("dx","25px").html(function(){var t=d3.select(this.parentNode).data()[0];return t[i.x.key]+" ("+r(t[i.y.key]/o)+")"}).each(function(){"vertical"===i.legend.type&&v.wrap(this,i.legend.size-20)}),l.exit().remove();var c=0,u=0,f=0;t.legend.selectAll(".legend-item").attr("transform",function(){var t=Math.max(u,25*f),e=c,a=d3.select(this).node().getBoundingClientRect();return"vertical"===i.legend.type?(u+=a.height+5,f++):(c+a.width>i.containerWidth&&(e=c=0,f++,t=Math.max(u,25*f)),c+=a.width+10),"translate("+e+", "+t+")"});var g=t.legend.node(),h=t.svg.node().getBBox();if(x.debug("BBoxes:",h,g.getBBox()),t.container){var p=d3.select(t.svg.node().parentNode),y=h.height+i.margin.bottom+i.height/2+h.y;y=Math.max(y,i.containerHeight),d3.selectAll(t.container).style("height",y+"px"),p.attr("height",y)}},wrapLabels:function(t,e){t.svg.selectAll("."+t.classPrefix+"-lines g text").each(function(){var t=this.parentNode.getBoundingClientRect();t.left<0?v.wrap(this,t.right):t.right>e.width&&v.wrap(this,e.width-t.left)})},setStyles:function(t,e){t.svg.selectAll("."+t.classPrefix+"-labelName text").style("fill",e.axis.color).style("font-weight",e.axis.fontWeight),t.svg.style("font-family",e.fontFamily).style("font-size",e.fontSize)}}}),angular.module("angular-d3-charts").factory("lineHelpers",function(t,e,a){return{addAxis:function(t,e){a.addXAxis(t,e),a.addYAxis(t,e),a.addSubdivideTicks(t.yl,t.y,t.yAxis,e.y)}}}),angular.module("angular-d3-charts").factory("svgHelpers",function(a,s){return{addSVG:function(t,e,a){var i=a.width+a.margin.left+a.margin.right;i+=a.legend.show&&"vertical"===a.legend.type?a.legend.size+a.legend.gap:0;var n=a.height+a.margin.top+a.margin.bottom+(a.axis.show?30:0);a.containerWidth=i,a.containerHeight=n;var r=d3.select(e).style("width",i+"px").style("height",n+"px").append("svg").attr("width",i).attr("height",n).append("g").attr("transform","translate("+a.margin.left+","+a.margin.top+")").style("cursor","pointer");return t.idClip="clip-"+s.getRandomString(),r.append("clipPath").attr("id",t.idClip).append("rect").attr("width",a.width).attr("height",a.height),t.svg=r},addZoomBehaviour:function(t,e){s.isDefined(t.x)?s.isDefined(t.y)?t.zoom=d3.zoom().scaleExtent([.5,100]).on("zoom",e):a.warn("[Angular - D3] y scale is not defined, unable set zoom behavior"):a.warn("[Angular - D3] x scale is not defined, unable set zoom behavior")},addXAxis:function(t,e){if(t.xl=t.svg.append("g").attr("class","x axis"),t.xlLeftOffset=0,e.axis.show&&"left"===e.y.position&&(t.xlLeftOffset=30,"axisRight"===e.y.orient&&(t.xlLeftOffset+=10)),"oneAxisBar"===t.type&&(t.xlLeftOffset=0),!s.isDefined(e.x.position)||s.isString(e.x.position))switch(e.x.position){case"top":t.xl.attr("transform","translate("+t.xlLeftOffset+", "+("axisBottom"===e.x.orient?0:20)+")");break;default:s.isDefined(e.x.position)&&s.isString(e.x.position)&&"bottom"===e.x.position||(a.warn('[Angular - D3] X Axis position must be a string. Setting default value "bottom"'),e.x.position="bottom"),t.xl.attr("transform","translate("+t.xlLeftOffset+", "+(e.height+("axisBottom"===e.x.orient?0:20))+")")}else s.isNumber(e.x.position)&&t.xl.attr("transform","translate("+t.xlLeftOffset+", "+("axisBottom"===e.x.orient?e.x.position+20:e.x.position)+")");t.xl.call(t.xAxis),s.isDefined(e.x.label)&&!1!==e.x.label&&t.xl.append("text").attr("class","label").attr("transform","translate("+e.width+")").attr("dx","0.8em").attr("dy","axisBottom"===e.x.orient?"1.35em":0).style("text-anchor","start").style("font-size","1.1em").style("font-weight","bold").text(e.x.label)},addYAxis:function(t,e){if(t.yl=t.svg.append("g").attr("class","y axis"),t.ylTopOffset=0,e.axis.show&&"top"===e.x.position&&(t.ylTopOffset=30),!s.isDefined(e.y.position)||s.isString(e.y.position))switch(e.y.position){case"right":t.yl.attr("transform","translate("+(e.width+("axisLeft"===e.y.orient?20:0))+","+t.ylTopOffset+")");break;default:s.isDefined(e.y.position)&&s.isString(e.y.position)&&"left"===e.y.position||(a.warn('[Angular - D3] Y Axis position must be a string. Setting default value "left"'),e.y.position="left"),t.yl.attr("transform","translate("+("axisLeft"===e.y.orient?20:0)+","+t.ylTopOffset+")")}else s.isNumber(e.y.position)&&t.yl.attr("transform","translate("+(e.y.position-("axisLeft"===e.y.orient?20:0))+","+t.ylTopOffset+")");t.yl.call(t.yAxis),s.isDefined(e.y.label)&&!1!==e.y.label&&t.yl.append("text").attr("class","label").attr("dy","right"===e.y.position?4:"top"===e.x.position?0:"-1em").attr("x","right"===e.y.position?"1.5em":"1em").attr("y","top"===e.x.position?e.height:0).style("text-anchor","start").style("font-size","1.1em").style("font-weight","bold").text(e.y.label)},addSubdivideTicks:function(t,e,a,i){t.selectAll(".tick.minor").classed("minor",!1).selectAll("text").style("display",null).style("stroke-width",0),"sqrt"!==i.scale&&"linear"!==i.scale||t.selectAll(".tick").data(e.ticks(i.ticks),function(t){return t}).exit().classed("minor",!0).selectAll("text").style("display","none")},updateStyles:function(t,e){var a="bar"===t.type?e.axis.stroke:null;!0===e.axis.show?(t.svg.selectAll(".axis path").style("stroke",a).style("fill","none").style("shape-rendering","crispEdges"),t.svg.selectAll(".axis .tick line").style("stroke",a).style("fill","none"),t.svg.selectAll(".axis .tick.minor").style("stroke",a).style("fill","none"),t.svg.selectAll(".axis text").style("fill",e.axis.color).style("font-weight",e.axis.fontWeight),t.svg.selectAll(".axis .label").style("fill",e.axis.label.color).style("font-weight",e.axis.label.fontWeight)):t.svg.selectAll(".axis").style("display","none"),t.svg.style("font-family",e.fontFamily),t.svg.style("font-size",e.fontSize)},wrap:function(t,e){for(var a,i=(t=d3.select(t)).text().split(/\s+/).reverse(),n=[],r=0,s=t.attr("y"),o=parseFloat(t.attr("dy")),l=t.attr("dx"),d=t.text(null).append("tspan").attr("x",0).attr("y",s).attr("dx",l).attr("dy",o+"em");a=i.pop();)n.push(a),d.text(n.join(" ")),d.node().getComputedTextLength()>e&&(n.pop(),d.text(n.join(" ")),n=[a],d=t.append("tspan").attr("x",0).attr("y",s).attr("dx",l).attr("dy",1.1*++r+o+"em").text(a))},getTranslation:function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","g");e.setAttributeNS(null,"transform",t);var a=e.transform.baseVal.consolidate().matrix;return[a.e,a.f]}}})}();
//# sourceMappingURL=angular-d3-charts.min.js.map